[debug] [2025-11-10T10:16:09.519Z] ----------------------------------------------------------------------
[debug] [2025-11-10T10:16:09.525Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --project borrowgmni
[debug] [2025-11-10T10:16:09.525Z] CLI Version:   14.24.1
[debug] [2025-11-10T10:16:09.525Z] Platform:      win32
[debug] [2025-11-10T10:16:09.525Z] Node Version:  v24.11.0
[debug] [2025-11-10T10:16:09.526Z] Time:          Mon Nov 10 2025 17:16:09 GMT+0700 (เวลาอินโดจีน)
[debug] [2025-11-10T10:16:09.526Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-10T10:16:09.733Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:16:09.733Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:16:09.733Z] [iam] checking project borrowgmni for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-11-10T10:16:09.734Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:09.734Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:09.735Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:16:09.735Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:16:09.736Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:16:11.192Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:16:11.192Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:16:11.193Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:11.194Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:11.194Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-11-10T10:16:11.194Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-11-10T10:16:12.934Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-11-10T10:16:12.935Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'borrowgmni'...
[info] 
[info] i  deploying functions 
[debug] [2025-11-10T10:16:12.950Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:12.950Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:12.950Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:16:13.419Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:16:13.419Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-11-10T10:16:13.431Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:13.431Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:13.432Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig [none]
[debug] [2025-11-10T10:16:14.571Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig 200
[debug] [2025-11-10T10:16:14.572Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig {"projectId":"borrowgmni","storageBucket":"borrowgmni.firebasestorage.app"}
[debug] [2025-11-10T10:16:14.573Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:14.574Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:14.574Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs [none]
[debug] [2025-11-10T10:16:15.334Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs 200
[debug] [2025-11-10T10:16:15.334Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs {}
[debug] [2025-11-10T10:16:15.336Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-10T10:16:17.027Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions --project borrowgmni",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase": "^12.5.0",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "typescript": "^5.0.0"
  },
  "private": true
}
[debug] [2025-11-10T10:16:17.027Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-11-10T10:16:17.029Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-10T10:16:17.043Z] Found firebase-functions binary at 'c:\Users\h4nny\Documents\borrow_h4n\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8986

[debug] [2025-11-10T10:16:17.869Z] Got response from /__/functions.yaml {"endpoints":{"deleteAllUsers":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"deleteAllUsers"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-11-10T10:16:21.927Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:16:21.927Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:16:21.927Z] [iam] checking project borrowgmni for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-11-10T10:16:21.928Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:21.928Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:21.928Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:16:21.928Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:16:21.928Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:16:23.313Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:16:23.313Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:16:23.315Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:23.315Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:23.316Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances pageSize=100&pageToken=
[debug] [2025-11-10T10:16:24.818Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances 200
[debug] [2025-11-10T10:16:24.819Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged c:\Users\h4nny\Documents\borrow_h4n\functions (73.38 KB) for uploading 
[debug] [2025-11-10T10:16:24.886Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:24.886Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:24.886Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions [none]
[debug] [2025-11-10T10:16:25.776Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:16:25.776Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions {"functions":[{"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","httpsTrigger":{"url":"https://us-central1-borrowgmni.cloudfunctions.net/deleteAllUsers","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"deleteAllUsers","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"borrowgmni@appspot.gserviceaccount.com","updateTime":"2025-11-10T09:58:47.720104357Z","versionId":"10","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"b57750974edf50ff04dfb9ac732bbe5c93e73403"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a5e229d6-bbc6-48db-8500-c1cff47c6bdf.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"03d73eeb-5d28-4842-bbf3-851075cf7089","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/724759892595/locations/us-central1/builds/03d73eeb-5d28-4842-bbf3-851075cf7089","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/borrowgmni/serviceAccounts/724759892595-compute@developer.gserviceaccount.com","satisfiesPzi":true}]}
[debug] [2025-11-10T10:16:25.779Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:25.779Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:25.780Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-11-10T10:16:27.493Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:16:27.493Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions {}
[debug] [2025-11-10T10:16:27.501Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:27.501Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:27.501Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:16:27.813Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:16:27.813Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[debug] [2025-11-10T10:16:27.817Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:27.817Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:27.818Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo [none]
[debug] [2025-11-10T10:16:28.554Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo 200
[debug] [2025-11-10T10:16:28.554Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo {"name":"projects/borrowgmni/billingInfo","projectId":"borrowgmni","billingAccountName":"billingAccounts/019E72-278F3A-A2418B","billingEnabled":true}
[debug] [2025-11-10T10:16:28.559Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:28.559Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:28.559Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-11-10T10:16:28.560Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-11-10T10:16:29.310Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-11-10T10:16:29.310Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771588&Signature=Wy%2F%2FzlK3sD0U2Z46b8U44jeMTZn07exAO%2BNTg7I2js%2FCEm7kIMRpb6EMUJGYW8ODARBu7eDSOnKPQXs8HnKL7VlImk0ILdwYi1T8jObLd8ScOaDGRThoDB2Q%2F2gBOU8prnNNT20e8LDymenyTPF9j9kgAK%2F5lYZiuichscBoXkn4p9JlMYRi6%2BoFE811mrweCBwUkJT9uF5n%2BD7p%2FBJnq5FbMV0WBsPo2sy929Pu0nrf8raZs8QkLw7yzLldDF2TZnw78XcSCBCsFoe0%2BNm0o4CsUWtstH8WM1%2BGu%2Br3aouNQAYGD6MIMLCryLxbEuF0zIBqRbPH2h%2FbV6X2ee9MoA%3D%3D"}
[debug] [2025-11-10T10:16:29.313Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip GoogleAccessId=service-724759892595%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771588&Signature=Wy%2F%2FzlK3sD0U2Z46b8U44jeMTZn07exAO%2BNTg7I2js%2FCEm7kIMRpb6EMUJGYW8ODARBu7eDSOnKPQXs8HnKL7VlImk0ILdwYi1T8jObLd8ScOaDGRThoDB2Q%2F2gBOU8prnNNT20e8LDymenyTPF9j9kgAK%2F5lYZiuichscBoXkn4p9JlMYRi6%2BoFE811mrweCBwUkJT9uF5n%2BD7p%2FBJnq5FbMV0WBsPo2sy929Pu0nrf8raZs8QkLw7yzLldDF2TZnw78XcSCBCsFoe0%2BNm0o4CsUWtstH8WM1%2BGu%2Br3aouNQAYGD6MIMLCryLxbEuF0zIBqRbPH2h%2FbV6X2ee9MoA%3D%3D
[debug] [2025-11-10T10:16:29.313Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip [stream]
[debug] [2025-11-10T10:16:31.452Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip 200
[debug] [2025-11-10T10:16:31.452Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] i  functions: updating Node.js 20 (1st Gen) function deleteAllUsers(us-central1)... 
[debug] [2025-11-10T10:16:31.472Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:31.472Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:31.472Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2025-11-10T10:16:31.473Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/91cf32be-c8cd-44b2-8ba2-cc04c4e34785.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771588&Signature=Wy%2F%2FzlK3sD0U2Z46b8U44jeMTZn07exAO%2BNTg7I2js%2FCEm7kIMRpb6EMUJGYW8ODARBu7eDSOnKPQXs8HnKL7VlImk0ILdwYi1T8jObLd8ScOaDGRThoDB2Q%2F2gBOU8prnNNT20e8LDymenyTPF9j9kgAK%2F5lYZiuichscBoXkn4p9JlMYRi6%2BoFE811mrweCBwUkJT9uF5n%2BD7p%2FBJnq5FbMV0WBsPo2sy929Pu0nrf8raZs8QkLw7yzLldDF2TZnw78XcSCBCsFoe0%2BNm0o4CsUWtstH8WM1%2BGu%2Br3aouNQAYGD6MIMLCryLxbEuF0zIBqRbPH2h%2FbV6X2ee9MoA%3D%3D","entryPoint":"deleteAllUsers","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"eec2ecdebed6a23490bd787f94abff80f7607b55"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-11-10T10:16:32.108Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 400
[debug] [2025-11-10T10:16:32.108Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"error":{"code":400,"message":"Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.","status":"FAILED_PRECONDITION"}}
[warn] !  functions: failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 
[error] Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers
[debug] [2025-11-10T10:16:32.121Z] Total Function Deployment time: 649
[debug] [2025-11-10T10:16:32.121Z] 1 Functions Deployed
[debug] [2025-11-10T10:16:32.121Z] 1 Functions Errored
[debug] [2025-11-10T10:16:32.121Z] 0 Function Deployments Aborted
[debug] [2025-11-10T10:16:32.121Z] Average Function Deployment time: 646
[info] 
[info] Functions deploy had errors with the following functions:
	deleteAllUsers(us-central1)
[debug] [2025-11-10T10:16:32.351Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:32.351Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:16:32.352Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-11-10T10:16:33.894Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-11-10T10:16:33.894Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts {"name":"projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-11-09T13:12:09.143028Z","updateTime":"2025-11-10T09:58:15.142920Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"817149319","vulnerabilityScanningConfig":{"lastEnableTime":"2025-11-09T13:12:00.373623973Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/borrowgmni/gcf-artifacts"}
[debug] [2025-11-10T10:16:33.895Z] Functions deploy failed.
[debug] [2025-11-10T10:16:33.896Z] {
  "endpoint": {
    "id": "deleteAllUsers",
    "project": "borrowgmni",
    "region": "us-central1",
    "entryPoint": "deleteAllUsers",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "borrowgmni",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "eec2ecdebed6a23490bd787f94abff80f7607b55"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "exit": 1,
    "message": "Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers?updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables had HTTP Error: 400, Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-11-10T10:16:33.976Z] Error: Failed to update function deleteAllUsers in region us-central1
    at C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV1Function (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:364:32)
    at async Fabricator.updateEndpoint (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:157:13)
    at async handle (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-11-10T10:19:58.833Z] ----------------------------------------------------------------------
[debug] [2025-11-10T10:19:58.838Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --project borrowgmni
[debug] [2025-11-10T10:19:58.838Z] CLI Version:   14.24.1
[debug] [2025-11-10T10:19:58.838Z] Platform:      win32
[debug] [2025-11-10T10:19:58.839Z] Node Version:  v24.11.0
[debug] [2025-11-10T10:19:58.839Z] Time:          Mon Nov 10 2025 17:19:58 GMT+0700 (เวลาอินโดจีน)
[debug] [2025-11-10T10:19:58.839Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-10T10:19:59.071Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:19:59.072Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:19:59.072Z] [iam] checking project borrowgmni for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-11-10T10:19:59.073Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:19:59.073Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:19:59.074Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:19:59.074Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:19:59.075Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:20:00.469Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:20:00.469Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:20:00.470Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:00.470Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:00.470Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-11-10T10:20:00.470Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-11-10T10:20:02.018Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-11-10T10:20:02.018Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'borrowgmni'...
[info] 
[info] i  deploying functions 
[debug] [2025-11-10T10:20:02.029Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:02.029Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:02.029Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:20:02.384Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:20:02.384Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-11-10T10:20:02.397Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:02.398Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:02.398Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig [none]
[debug] [2025-11-10T10:20:04.142Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig 200
[debug] [2025-11-10T10:20:04.143Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig {"projectId":"borrowgmni","storageBucket":"borrowgmni.firebasestorage.app"}
[debug] [2025-11-10T10:20:04.143Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:04.143Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:04.143Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs [none]
[debug] [2025-11-10T10:20:04.944Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs 200
[debug] [2025-11-10T10:20:04.944Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs {}
[debug] [2025-11-10T10:20:04.947Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-10T10:20:06.567Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions --project borrowgmni",
    "deploy:project": "firebase deploy --only functions --project borrowgmni",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase": "^12.5.0",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "typescript": "^5.0.0"
  },
  "private": true
}
[debug] [2025-11-10T10:20:06.567Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-11-10T10:20:06.568Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-10T10:20:06.582Z] Found firebase-functions binary at 'c:\Users\h4nny\Documents\borrow_h4n\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8755

[debug] [2025-11-10T10:20:07.456Z] Got response from /__/functions.yaml {"endpoints":{"deleteAllUsers":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"deleteAllUsers"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-11-10T10:20:11.531Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:20:11.531Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:20:11.531Z] [iam] checking project borrowgmni for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-11-10T10:20:11.532Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:11.532Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:11.532Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:20:11.532Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:20:11.532Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:20:12.865Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:20:12.865Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:20:12.867Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:12.867Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:12.868Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances pageSize=100&pageToken=
[debug] [2025-11-10T10:20:14.542Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances 200
[debug] [2025-11-10T10:20:14.543Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged c:\Users\h4nny\Documents\borrow_h4n\functions (73.39 KB) for uploading 
[debug] [2025-11-10T10:20:14.753Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:14.753Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:14.754Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions [none]
[debug] [2025-11-10T10:20:15.651Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:20:15.652Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions {"functions":[{"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","httpsTrigger":{"url":"https://us-central1-borrowgmni.cloudfunctions.net/deleteAllUsers","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"deleteAllUsers","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"borrowgmni@appspot.gserviceaccount.com","updateTime":"2025-11-10T09:58:47.720104357Z","versionId":"10","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"b57750974edf50ff04dfb9ac732bbe5c93e73403"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a5e229d6-bbc6-48db-8500-c1cff47c6bdf.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"03d73eeb-5d28-4842-bbf3-851075cf7089","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/724759892595/locations/us-central1/builds/03d73eeb-5d28-4842-bbf3-851075cf7089","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/borrowgmni/serviceAccounts/724759892595-compute@developer.gserviceaccount.com","satisfiesPzi":true}]}
[debug] [2025-11-10T10:20:15.655Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:15.655Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:15.656Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-11-10T10:20:17.423Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:20:17.424Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions {}
[debug] [2025-11-10T10:20:17.436Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:17.436Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:17.436Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:20:17.769Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:20:17.769Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[debug] [2025-11-10T10:20:17.773Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:17.773Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:17.774Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo [none]
[debug] [2025-11-10T10:20:18.380Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo 200
[debug] [2025-11-10T10:20:18.381Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo {"name":"projects/borrowgmni/billingInfo","projectId":"borrowgmni","billingAccountName":"billingAccounts/019E72-278F3A-A2418B","billingEnabled":true}
[debug] [2025-11-10T10:20:18.384Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:18.384Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:18.384Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-11-10T10:20:18.384Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-11-10T10:20:19.338Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-11-10T10:20:19.338Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771818&Signature=aUuK6W0ujFpbwtgi7aYJn1FbMoPK69oDZFNWAf%2FVXyfKslV8bTmRmvx%2BpHLDoMJ9TSU8mUeJORS3A2U7mWyYYkrVNhhz2Hxj9EKprIZTeRtzlBA8YKv9hkpv439%2FHzxyaFzAxwHchTRmOtoeAZ5ZtZv6QTr6Koyg7XXb2doUm2zUvVvcZca03Grlg5lXR3l5aU6qyVUaxQJCuAd4tN%2B83fPYKgGuVm8AQEsBZ2ZVP%2BswysiW2S2tGiH11CkQ64Z5Ig393BjKGnZ6OTta%2BN4MnEQI6vXN6%2F77lGi8SZDmtnlYUKzoJF4FXc8YeB6vVj1hC7PWAdlHOlg6laqM8tqgFw%3D%3D"}
[debug] [2025-11-10T10:20:19.340Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip GoogleAccessId=service-724759892595%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771818&Signature=aUuK6W0ujFpbwtgi7aYJn1FbMoPK69oDZFNWAf%2FVXyfKslV8bTmRmvx%2BpHLDoMJ9TSU8mUeJORS3A2U7mWyYYkrVNhhz2Hxj9EKprIZTeRtzlBA8YKv9hkpv439%2FHzxyaFzAxwHchTRmOtoeAZ5ZtZv6QTr6Koyg7XXb2doUm2zUvVvcZca03Grlg5lXR3l5aU6qyVUaxQJCuAd4tN%2B83fPYKgGuVm8AQEsBZ2ZVP%2BswysiW2S2tGiH11CkQ64Z5Ig393BjKGnZ6OTta%2BN4MnEQI6vXN6%2F77lGi8SZDmtnlYUKzoJF4FXc8YeB6vVj1hC7PWAdlHOlg6laqM8tqgFw%3D%3D
[debug] [2025-11-10T10:20:19.340Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip [stream]
[debug] [2025-11-10T10:20:21.481Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip 200
[debug] [2025-11-10T10:20:21.481Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] i  functions: updating Node.js 20 (1st Gen) function deleteAllUsers(us-central1)... 
[debug] [2025-11-10T10:20:21.488Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:21.488Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:21.488Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2025-11-10T10:20:21.488Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/0df602dc-8e53-4e86-bda3-7f45224ea481.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762771818&Signature=aUuK6W0ujFpbwtgi7aYJn1FbMoPK69oDZFNWAf%2FVXyfKslV8bTmRmvx%2BpHLDoMJ9TSU8mUeJORS3A2U7mWyYYkrVNhhz2Hxj9EKprIZTeRtzlBA8YKv9hkpv439%2FHzxyaFzAxwHchTRmOtoeAZ5ZtZv6QTr6Koyg7XXb2doUm2zUvVvcZca03Grlg5lXR3l5aU6qyVUaxQJCuAd4tN%2B83fPYKgGuVm8AQEsBZ2ZVP%2BswysiW2S2tGiH11CkQ64Z5Ig393BjKGnZ6OTta%2BN4MnEQI6vXN6%2F77lGi8SZDmtnlYUKzoJF4FXc8YeB6vVj1hC7PWAdlHOlg6laqM8tqgFw%3D%3D","entryPoint":"deleteAllUsers","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"a6f96b92fac05903af35a18a08add63a405e1f81"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-11-10T10:20:22.127Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 400
[debug] [2025-11-10T10:20:22.127Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"error":{"code":400,"message":"Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.","status":"FAILED_PRECONDITION"}}
[warn] !  functions: failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 
[error] Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers
[debug] [2025-11-10T10:20:22.139Z] Total Function Deployment time: 644
[debug] [2025-11-10T10:20:22.139Z] 1 Functions Deployed
[debug] [2025-11-10T10:20:22.140Z] 1 Functions Errored
[debug] [2025-11-10T10:20:22.140Z] 0 Function Deployments Aborted
[debug] [2025-11-10T10:20:22.140Z] Average Function Deployment time: 643
[info] 
[info] Functions deploy had errors with the following functions:
	deleteAllUsers(us-central1)
[debug] [2025-11-10T10:20:22.370Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:22.370Z] Checked if tokens are valid: true, expires at: 1762771194070
[debug] [2025-11-10T10:20:22.370Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-11-10T10:20:23.778Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-11-10T10:20:23.778Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts {"name":"projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-11-09T13:12:09.143028Z","updateTime":"2025-11-10T09:58:15.142920Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"817149319","vulnerabilityScanningConfig":{"lastEnableTime":"2025-11-09T13:12:00.373623973Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/borrowgmni/gcf-artifacts"}
[debug] [2025-11-10T10:20:23.779Z] Functions deploy failed.
[debug] [2025-11-10T10:20:23.779Z] {
  "endpoint": {
    "id": "deleteAllUsers",
    "project": "borrowgmni",
    "region": "us-central1",
    "entryPoint": "deleteAllUsers",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "borrowgmni",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "a6f96b92fac05903af35a18a08add63a405e1f81"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "exit": 1,
    "message": "Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers?updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables had HTTP Error: 400, Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-11-10T10:20:23.886Z] Error: Failed to update function deleteAllUsers in region us-central1
    at C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV1Function (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:364:32)
    at async Fabricator.updateEndpoint (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:157:13)
    at async handle (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-11-10T10:25:24.692Z] ----------------------------------------------------------------------
[debug] [2025-11-10T10:25:24.698Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --project borrowgmni
[debug] [2025-11-10T10:25:24.698Z] CLI Version:   14.24.1
[debug] [2025-11-10T10:25:24.698Z] Platform:      win32
[debug] [2025-11-10T10:25:24.698Z] Node Version:  v24.11.0
[debug] [2025-11-10T10:25:24.698Z] Time:          Mon Nov 10 2025 17:25:24 GMT+0700 (เวลาอินโดจีน)
[debug] [2025-11-10T10:25:24.699Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-10T10:25:24.898Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:25:24.898Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:25:24.898Z] [iam] checking project borrowgmni for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-11-10T10:25:24.899Z] Checked if tokens are valid: false, expires at: 1762771194070
[debug] [2025-11-10T10:25:24.899Z] Checked if tokens are valid: false, expires at: 1762771194070
[debug] [2025-11-10T10:25:24.900Z] > refreshing access token with scopes: []
[debug] [2025-11-10T10:25:24.902Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-11-10T10:25:24.902Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-10T10:25:25.220Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-11-10T10:25:25.221Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-10T10:25:25.246Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:25:25.246Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:25:25.246Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:25:26.605Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:25:26.605Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-10T10:25:26.606Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:26.606Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:26.606Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-11-10T10:25:26.606Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-11-10T10:25:28.191Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-11-10T10:25:28.192Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/borrowgmni/serviceAccounts/borrowgmni@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'borrowgmni'...
[info] 
[info] i  deploying functions 
[debug] [2025-11-10T10:25:28.206Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:28.206Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:28.206Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:25:28.521Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:25:28.522Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-11-10T10:25:28.535Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:28.535Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:28.536Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig [none]
[debug] [2025-11-10T10:25:29.634Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig 200
[debug] [2025-11-10T10:25:29.635Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/borrowgmni/adminSdkConfig {"projectId":"borrowgmni","storageBucket":"borrowgmni.firebasestorage.app"}
[debug] [2025-11-10T10:25:29.636Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:29.637Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:29.637Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs [none]
[debug] [2025-11-10T10:25:30.205Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs 200
[debug] [2025-11-10T10:25:30.205Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/borrowgmni/configs {}
[debug] [2025-11-10T10:25:30.212Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-10T10:25:31.762Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions --project borrowgmni",
    "deploy:project": "firebase deploy --only functions --project borrowgmni",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase": "^12.5.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.1"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "typescript": "^5.0.0"
  },
  "private": true
}
[debug] [2025-11-10T10:25:31.762Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-11-10T10:25:31.764Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-10T10:25:31.775Z] Found firebase-functions binary at 'c:\Users\h4nny\Documents\borrow_h4n\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8642

[debug] [2025-11-10T10:25:32.689Z] Got response from /__/functions.yaml {"endpoints":{"deleteAllUsers":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"deleteAllUsers"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-11-10T10:25:36.764Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T10:25:36.764Z] > authorizing via signed-in user (h4nnyza@gmail.com)
[debug] [2025-11-10T10:25:36.764Z] [iam] checking project borrowgmni for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-11-10T10:25:36.765Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:36.765Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:36.765Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions [none]
[debug] [2025-11-10T10:25:36.765Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions x-goog-quota-user=projects/borrowgmni
[debug] [2025-11-10T10:25:36.765Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:25:38.230Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions 200
[debug] [2025-11-10T10:25:38.231Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-10T10:25:38.231Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:38.231Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:38.231Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances pageSize=100&pageToken=
[debug] [2025-11-10T10:25:39.827Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances 200
[debug] [2025-11-10T10:25:39.827Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/borrowgmni/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged c:\Users\h4nny\Documents\borrow_h4n\functions (68.65 KB) for uploading 
[debug] [2025-11-10T10:25:39.905Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:39.905Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:39.905Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions [none]
[debug] [2025-11-10T10:25:40.892Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:25:40.892Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/-/functions {"functions":[{"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","httpsTrigger":{"url":"https://us-central1-borrowgmni.cloudfunctions.net/deleteAllUsers","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"deleteAllUsers","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"borrowgmni@appspot.gserviceaccount.com","updateTime":"2025-11-10T09:58:47.720104357Z","versionId":"10","labels":{"deployment-callable":"true","firebase-functions-hash":"b57750974edf50ff04dfb9ac732bbe5c93e73403","deployment-tool":"cli-firebase"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a5e229d6-bbc6-48db-8500-c1cff47c6bdf.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"03d73eeb-5d28-4842-bbf3-851075cf7089","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/724759892595/locations/us-central1/builds/03d73eeb-5d28-4842-bbf3-851075cf7089","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/borrowgmni/serviceAccounts/724759892595-compute@developer.gserviceaccount.com","satisfiesPzi":true}]}
[debug] [2025-11-10T10:25:40.893Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:40.893Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:40.894Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-11-10T10:25:41.494Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions 200
[debug] [2025-11-10T10:25:41.495Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/borrowgmni/locations/-/functions {}
[debug] [2025-11-10T10:25:41.500Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:41.500Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:41.500Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni [none]
[debug] [2025-11-10T10:25:41.906Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni 200
[debug] [2025-11-10T10:25:41.906Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/borrowgmni {"projectNumber":"724759892595","projectId":"borrowgmni","lifecycleState":"ACTIVE","name":"borrowgmni","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-10-22T16:26:52.689982Z"}
[debug] [2025-11-10T10:25:41.910Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:41.911Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:41.911Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo [none]
[debug] [2025-11-10T10:25:42.479Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo 200
[debug] [2025-11-10T10:25:42.480Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/borrowgmni/billingInfo {"name":"projects/borrowgmni/billingInfo","projectId":"borrowgmni","billingAccountName":"billingAccounts/019E72-278F3A-A2418B","billingEnabled":true}
[debug] [2025-11-10T10:25:42.482Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:42.482Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:42.482Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-11-10T10:25:42.482Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-11-10T10:25:43.327Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-11-10T10:25:43.327Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762772142&Signature=KuO9xJWKT4N8yJQJKZU%2BWba%2FaAghHkdk5SM29vk2cf7Nvo0FvBUZ4Mw03Z2y8QRJr%2Bxh1tagnd4Iyx4UgHUsjbba8bQy31oBD04fEJlBS0uA4eL3xqR1COzEI7f2jO0XrfRK58ijd3sZuP7%2BPorIokEAE3G2GGRgvPybDPFrm5TTMW0KGKFyWI4eZeImIa%2FOeBw%2BN6jCTiGvHUj1I2lZPihm7TlYBYiDF%2BfysH0zjp1SByuhWYl1AIUXFzewKI6LdqJdSWYv%2FAZc1xZenDJbKANufEHKWWTXQAWZzWmMIrA1ukl5EdJ%2FXiFk7aCuzZCaxJqXWHhRoiypyvSzXjQdHQ%3D%3D"}
[debug] [2025-11-10T10:25:43.329Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip GoogleAccessId=service-724759892595%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1762772142&Signature=KuO9xJWKT4N8yJQJKZU%2BWba%2FaAghHkdk5SM29vk2cf7Nvo0FvBUZ4Mw03Z2y8QRJr%2Bxh1tagnd4Iyx4UgHUsjbba8bQy31oBD04fEJlBS0uA4eL3xqR1COzEI7f2jO0XrfRK58ijd3sZuP7%2BPorIokEAE3G2GGRgvPybDPFrm5TTMW0KGKFyWI4eZeImIa%2FOeBw%2BN6jCTiGvHUj1I2lZPihm7TlYBYiDF%2BfysH0zjp1SByuhWYl1AIUXFzewKI6LdqJdSWYv%2FAZc1xZenDJbKANufEHKWWTXQAWZzWmMIrA1ukl5EdJ%2FXiFk7aCuzZCaxJqXWHhRoiypyvSzXjQdHQ%3D%3D
[debug] [2025-11-10T10:25:43.330Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip [stream]
[debug] [2025-11-10T10:25:44.362Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip 200
[debug] [2025-11-10T10:25:44.362Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] i  functions: updating Node.js 20 (1st Gen) function deleteAllUsers(us-central1)... 
[debug] [2025-11-10T10:25:44.381Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:44.382Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:44.382Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2025-11-10T10:25:44.383Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"name":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers","sourceUploadUrl":"https://storage.googleapis.com/uploads-803229893303.us-central1.cloudfunctions.appspot.com/a9891581-50bc-4c8e-9a63-8e0872c25aad.zip?GoogleAccessId=service-724759892595@gcf-admin-robot.iam.gserviceaccount.com&Expires=1762772142&Signature=KuO9xJWKT4N8yJQJKZU%2BWba%2FaAghHkdk5SM29vk2cf7Nvo0FvBUZ4Mw03Z2y8QRJr%2Bxh1tagnd4Iyx4UgHUsjbba8bQy31oBD04fEJlBS0uA4eL3xqR1COzEI7f2jO0XrfRK58ijd3sZuP7%2BPorIokEAE3G2GGRgvPybDPFrm5TTMW0KGKFyWI4eZeImIa%2FOeBw%2BN6jCTiGvHUj1I2lZPihm7TlYBYiDF%2BfysH0zjp1SByuhWYl1AIUXFzewKI6LdqJdSWYv%2FAZc1xZenDJbKANufEHKWWTXQAWZzWmMIrA1ukl5EdJ%2FXiFk7aCuzZCaxJqXWHhRoiypyvSzXjQdHQ%3D%3D","entryPoint":"deleteAllUsers","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"b3fb6b3ec7a879bfa0c95843b100fccc3f22ad28"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}","GCLOUD_PROJECT":"borrowgmni","EVENTARC_CLOUD_EVENT_SOURCE":"projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-11-10T10:25:45.051Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 400
[debug] [2025-11-10T10:25:45.052Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers {"error":{"code":400,"message":"Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.","status":"FAILED_PRECONDITION"}}
[warn] !  functions: failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers 
[error] Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers
[debug] [2025-11-10T10:25:45.074Z] Total Function Deployment time: 685
[debug] [2025-11-10T10:25:45.075Z] 1 Functions Deployed
[debug] [2025-11-10T10:25:45.075Z] 1 Functions Errored
[debug] [2025-11-10T10:25:45.075Z] 0 Function Deployments Aborted
[debug] [2025-11-10T10:25:45.075Z] Average Function Deployment time: 683
[info] 
[info] Functions deploy had errors with the following functions:
	deleteAllUsers(us-central1)
[debug] [2025-11-10T10:25:45.341Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:45.341Z] Checked if tokens are valid: true, expires at: 1762773924221
[debug] [2025-11-10T10:25:45.341Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-11-10T10:25:46.887Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-11-10T10:25:46.888Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts {"name":"projects/borrowgmni/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-11-09T13:12:09.143028Z","updateTime":"2025-11-10T09:58:15.142920Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"817149319","vulnerabilityScanningConfig":{"lastEnableTime":"2025-11-09T13:12:00.373623973Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/borrowgmni/gcf-artifacts"}
[debug] [2025-11-10T10:25:46.888Z] Functions deploy failed.
[debug] [2025-11-10T10:25:46.889Z] {
  "endpoint": {
    "id": "deleteAllUsers",
    "project": "borrowgmni",
    "region": "us-central1",
    "entryPoint": "deleteAllUsers",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"borrowgmni\",\"storageBucket\":\"borrowgmni.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "borrowgmni",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "b3fb6b3ec7a879bfa0c95843b100fccc3f22ad28"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/borrowgmni/locations/us-central1/functions/deleteAllUsers"
    },
    "exit": 1,
    "message": "Failed to update function projects/borrowgmni/locations/us-central1/functions/deleteAllUsers",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/borrowgmni/locations/us-central1/functions/deleteAllUsers?updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables had HTTP Error: 400, Function deleteAllUsers is undergoing 2nd Gen upgrade and can not be modified at the moment. Abort the ongoing upgrade and try again.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-11-10T10:25:46.978Z] Error: Failed to update function deleteAllUsers in region us-central1
    at C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV1Function (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:364:32)
    at async Fabricator.updateEndpoint (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:157:13)
    at async handle (C:\Users\h4nny\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
